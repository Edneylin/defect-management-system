# 🔧 零件供應商權責判別功能說明

## 📋 功能概述
本功能為不良品管理系統新增了產品-零件-供應商的階層式選擇機制，基於產品11U885R00300的零件組成結構，實現精確的供應商權責判別。

## 🎯 核心價值
- **權責清晰**: 根據零件類型快速識別責任供應商
- **追蹤精確**: 準確記錄每個零件的供應商資訊
- **分析便利**: 提供供應商品質統計和分析功能
- **管理高效**: 簡化不良品權責判別流程

## 🔍 零件識別機制

### 支援的零件類型
系統會自動識別產品名稱中包含的零件關鍵字：

| 零件類型 | 關鍵字 | 供應商選項 |
|---------|--------|-----------|
| **軸類零件** | SHAFT, Shaft, shaft | 東佑達、豐達科技、精密軸承 |
| **扣件零件** | CLIP, Clip, clip | 弘昌、立凱、精工扣件 |
| **座類零件** | MOUNT, Mount, mount | 固德、精密座、台灣座業 |
| **套類零件** | BUSHING, Bushing, bushing | 軸承王、精密套、台製軸套 |

### 識別範例
```
產品名稱範例：
✅ Motor-SHAFT-001     → 識別為 SHAFT 零件
✅ Spring-CLIP-A1      → 識別為 CLIP 零件  
✅ Camera-MOUNT-Pro    → 識別為 MOUNT 零件
✅ Rubber-BUSHING-F6   → 識別為 BUSHING 零件
✅ SHAFT-MOUNT-assembly → 識別為 SHAFT + MOUNT 複合零件
⚪ PCB-Board-001       → 無特定零件，顯示選填欄位
```

## 💻 使用流程

### 步驟1：工單資訊輸入
在不良品登錄頁面輸入工單號碼，系統會顯示：
- 預計包數
- 累計不良數量  
- 目前不良率

### 步驟2：產品資訊選擇
在「產品資訊預覽」區域：
1. **選擇產品名稱**: 從下拉選單選擇或手動輸入
2. **自動零件識別**: 系統自動檢測產品名稱中的零件關鍵字
3. **供應商選項顯示**: 根據零件類型自動顯示對應供應商選項

### 步驟3：供應商選擇
- **單一零件產品**: 顯示該零件類型的專屬供應商選項
- **複合零件產品**: 顯示主要零件的供應商選項
- **其他產品**: 提供選填的供應商輸入欄位
- **自定義選項**: 可選擇"其他"並手動輸入供應商名稱

### 步驟4：確認提交
系統會在表單區域顯示：
- 選定的產品名稱
- 識別的零件類型
- 選定的供應商
- 其他必填資訊

## 🎨 界面設計特點

### 即時響應
- 選擇產品名稱後立即顯示零件識別結果
- 供應商選項即時更新
- 綠色確認提示即時反饋

### 友善體驗
- 使用[淺藍色科技感配色方案][[memory:2389827913052555193]]
- 清晰的步驟指引
- 溫馨友善的提示文字
- 直覺易懂的操作流程

### 智能檢測
- 支援大小寫混合的產品名稱
- 自動識別複合零件產品
- 靈活的供應商選項配置

## 📊 權責判別邏輯

### 單一零件產品
```
產品: Motor-SHAFT-001
零件: SHAFT
可能權責供應商: 東佑達、豐達科技、精密軸承
權責判別: SHAFT零件供應商
```

### 複合零件產品
```
產品: SHAFT-MOUNT-assembly  
零件: SHAFT + MOUNT
可能權責供應商: 東佑達、豐達科技、精密軸承、固德、精密座、台灣座業
權責判別: 需根據具體不良情況進一步確認主要責任零件
```

### 權責分析建議
1. **單一零件**: 直接指向該零件的供應商
2. **複合零件**: 根據不良描述判斷主要責任零件
3. **功能不良**: 可能涉及多個零件，需詳細分析
4. **外觀不良**: 通常責任較明確

## 📈 統計分析功能

### 供應商分析
在統計分析頁面的「🏭 供應商分析」區塊可查看：
- 各供應商不良品數量統計
- 供應商vs產品類型交叉分析
- 供應商品質表現趨勢
- 零件類型不良分布

### 權責追蹤
- 按零件類型統計不良品數量
- 按供應商統計品質表現
- 追蹤權責處理進度
- 分析供應商改善效果

## 🧪 測試案例

系統已創建以下測試數據供參考：

| 產品名稱 | 零件類型 | 供應商 | 不良類型 | 權責判別 |
|---------|---------|--------|---------|---------|
| Motor-SHAFT-001 | SHAFT | 東佑達 | 尺寸不良 | SHAFT零件供應商 |
| Spring-CLIP-A1 | CLIP | 弘昌 | 材質不良 | CLIP零件供應商 |
| Camera-MOUNT-Pro | MOUNT | 固德 | 組裝不良 | MOUNT零件供應商 |
| Rubber-BUSHING-F6 | BUSHING | 軸承王 | 外觀不良 | BUSHING零件供應商 |
| SHAFT-MOUNT-assembly | SHAFT+MOUNT | 豐達科技 | 功能不良 | 複合零件需詳細分析 |

## 🔧 技術實現

### 核心邏輯
```python
# 零件識別
def detect_components(product_name):
    components = []
    for component in ['SHAFT', 'CLIP', 'MOUNT', 'BUSHING']:
        if component in product_name.upper():
            components.append(component)
    return components

# 供應商選項配置
supplier_options = {
    "SHAFT": ["東佑達", "豐達科技", "精密軸承"],
    "CLIP": ["弘昌", "立凱", "精工扣件"],
    "MOUNT": ["固德", "精密座", "台灣座業"],
    "BUSHING": ["軸承王", "精密套", "台製軸套"]
}
```

### 資料庫結構
- `supplier` 欄位儲存供應商資訊
- 支援供應商統計查詢
- 與現有不良品管理系統完全整合

## 💡 使用建議

### 產品命名規範
- 建議在產品名稱中包含零件類型關鍵字
- 範例：`Motor-SHAFT-001`、`Spring-CLIP-A1`
- 複合產品可包含多個零件關鍵字：`SHAFT-MOUNT-assembly`

### 權責判別最佳實踐
1. **詳細描述**: 在問題描述中說明具體不良情況
2. **零件定位**: 明確指出問題發生在哪個零件
3. **供應商選擇**: 根據主要責任零件選擇對應供應商
4. **追蹤記錄**: 利用系統統計功能追蹤改善效果

### 供應商管理建議
- 定期檢視供應商品質統計
- 建立供應商改善追蹤機制
- 根據統計數據進行供應商評估
- 持續優化零件供應商配置

## 📊 系統狀態
- 🌐 **系統地址**: http://localhost:8501
- ✅ **運行狀態**: 正常
- 🧪 **測試數據**: 已創建5筆測試記錄
- 📱 **界面狀態**: 零件識別功能正常
- 🔍 **權責判別**: 功能完整

## 🎉 功能優勢

### 提升效率
- 自動識別零件類型，減少人工判別時間
- 即時顯示供應商選項，加速登錄流程
- 統計分析功能支援快速決策

### 提高準確性
- 標準化的零件識別邏輯
- 預設的供應商選項配置
- 完整的權責追蹤記錄

### 便於管理
- 清晰的供應商分類管理
- 完整的統計分析功能
- 靈活的配置擴展能力

---
*功能完成時間: 2024年12月*  
*系統版本: 不良品管理系統 v2.0*  
*零件供應商權責判別功能 v1.0* 