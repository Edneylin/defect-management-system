# 📱 Telegram通知功能設定說明

## 🌟 為什麼選擇Telegram？

由於LINE Notify已於2024年4月1日停止新用戶註冊服務，我們推薦使用**Telegram Bot**作為最佳替代方案：

✅ **完全免費**且功能強大  
✅ **國際通用**，無地區限制  
✅ **API簡單**，支援豐富格式  
✅ **群組支援**，可建立專用通知群組  
✅ **即時推送**，送達率高  
✅ **跨平台**，支援手機、電腦、網頁版  

---

## 🚀 快速設定步驟

### 步驟1：創建Telegram Bot

1. **開啟Telegram應用程式**
2. **搜尋並開啟 @BotFather**
3. **發送命令** `/newbot`
4. **輸入機器人名稱**（例如：不良品管理通知Bot）
5. **輸入機器人用戶名**（例如：defect_management_bot）
6. **複製Bot Token**（格式：123456789:ABCdefGHIjklMNOpqrSTUvwxyz）

### 步驟2：取得聊天室ID

#### 方法A：個人通知
1. **與您的Bot對話**
2. **發送任意訊息**給Bot
3. **前往網址**：`https://api.telegram.org/bot您的BOT_TOKEN/getUpdates`
4. **找到 "chat" -> "id"** 數值（例如：123456789）

#### 方法B：群組通知
1. **建立Telegram群組**
2. **邀請您的Bot加入群組**
3. **在群組中發送訊息** `/start`
4. **前往網址**：`https://api.telegram.org/bot您的BOT_TOKEN/getUpdates`
5. **找到 "chat" -> "id"** 數值（群組ID通常是負數，例如：-123456789）

### 步驟3：系統設定

1. **開啟不良品管理系統**
2. **進入「⚙️ 系統設定」頁面**
3. **勾選「📱 Telegram通知」**
4. **填入Bot Token**
5. **填入聊天室ID**（每行一個，支援多個）
6. **點選「💾 儲存設定」**
7. **點選「📱 發送測試Telegram」**驗證設定

---

## 🔧 詳細設定說明

### Bot Token設定
```
格式：123456789:ABCdefGHIjklMNOpqrSTUvwxyz
範例：1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijk
```

### 聊天室ID設定
```
個人聊天室：123456789
群組聊天室：-123456789
多個聊天室：
123456789
-987654321
-111222333
```

---

## 📋 功能特色

### 🚨 自動逾期提醒
- **A級不良品**：4小時內處理，每2小時提醒
- **B級不良品**：8小時內處理，每4小時提醒  
- **C級不良品**：24小時內處理，每8小時提醒

### 📊 豐富的通知內容
- **部門資訊**：清楚標示責任部門
- **案件統計**：顯示逾期案件數量
- **詳細清單**：工單號、產品名稱、等級、數量
- **時間資訊**：建立時間、逾期時長
- **快速連結**：直接進入系統處理

### 🎨 美觀的訊息格式
- **HTML格式**：支援粗體、連結等豐富格式
- **表情符號**：使用圖示增加可讀性
- **結構化呈現**：清楚的分隔線和排版

---

## 🛠️ 常見問題解決

### Q1：無法取得聊天室ID？
**解決方案：**
1. 確認已與Bot對話或邀請Bot加入群組
2. 檢查網址中的Bot Token是否正確
3. 使用瀏覽器開發者工具查看JSON回應

### Q2：測試通知發送失敗？
**解決方案：**
1. 檢查Bot Token格式是否正確
2. 確認聊天室ID是否正確（注意正負號）
3. 確認網路連線正常
4. 檢查Bot是否被封鎖

### Q3：群組通知收不到？
**解決方案：**
1. 確認Bot已加入群組
2. 確認Bot有發送訊息權限
3. 檢查群組ID是否為負數
4. 嘗試重新邀請Bot

### Q4：如何設定多個通知群組？
**解決方案：**
```
在聊天室ID欄位中，每行輸入一個ID：
123456789        ← 個人聊天室
-987654321       ← 品質部群組  
-111222333       ← 生產部群組
-444555666       ← 主管群組
```

---

## 🔒 安全性注意事項

1. **保護Bot Token**：不要分享給未授權人員
2. **定期檢查**：定期檢查Bot的對話清單
3. **權限控制**：只邀請必要人員加入通知群組
4. **備份設定**：定期備份notification_settings.json檔案

---

## 📞 技術支援

如果您在設定過程中遇到問題，請：

1. **檢查設定檔案**：notification_settings.json
2. **查看系統日誌**：觀察錯誤訊息
3. **測試網路連線**：確認可存取Telegram API
4. **重新啟動系統**：重新載入設定

---

## 🎯 使用建議

### 建議的群組設定
- **品質部群組**：接收所有不良品通知
- **生產部群組**：接收生產相關不良品通知  
- **主管群組**：接收A級緊急不良品通知
- **個人通知**：負責人個人即時提醒

### 最佳實務
1. **測試優先**：設定完成後務必測試
2. **分級通知**：不同等級設定不同群組
3. **定期檢查**：定期檢查通知是否正常
4. **備份設定**：重要設定記得備份

---

*📝 本文件最後更新：2024年6月*
*�� 隨著系統更新，本說明可能會有所調整* 