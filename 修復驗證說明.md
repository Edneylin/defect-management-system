# ğŸ”§ é›¶ä»¶ä¸è‰¯çµ±è¨ˆåˆ†æä¿®å¾©é©—è­‰èªªæ˜

## ğŸ“‹ å•é¡Œæè¿°

ç”¨æˆ¶åæ˜ åœ¨è™•ç†è¿½è¹¤é é¢å·²ç¶“é¸æ“‡äº†ä¸è‰¯é›¶ä»¶ï¼Œä½†åœ¨çµ±è¨ˆåˆ†æé é¢æ²’æœ‰é€²è¡Œçµ±è¨ˆå½™æ•´ã€‚

## ğŸ” å•é¡Œåˆ†æéç¨‹

### 1. åˆæ­¥æª¢æŸ¥
- ç¢ºèªè™•ç†è¿½è¹¤é é¢çš„é›¶ä»¶ä¸è‰¯é¸æ“‡åŠŸèƒ½æ­£å¸¸
- ç¢ºèªè³‡æ–™åº«ä¸­æœ‰defective_componentæ¬„ä½å’Œè³‡æ–™
- ç™¼ç¾çµ±è¨ˆåˆ†æé é¢çš„é›¶ä»¶ä¸è‰¯åˆ†æå€æ®µé¡¯ç¤º"æš«ç„¡é›¶ä»¶ä¸è‰¯è³‡æ–™"

### 2. æ·±å…¥èª¿æŸ¥
é€šéæª¢æŸ¥è³‡æ–™åº«ç™¼ç¾ï¼š
```sql
SELECT id, work_order, product_name, defect_type, quantity, defective_component, status
FROM defects 
WHERE defective_component IS NOT NULL AND defective_component != ''
```

çµæœé¡¯ç¤ºæœ‰3ç­†è¨˜éŒ„ï¼š
- ID: 62, å·¥å–®: JAR001, ç”¢å“: 11U885R00300, ä¸è‰¯é¡å‹: è¡¨é¢ç¼ºé™·, æ•¸é‡: 13, é›¶ä»¶: Mount
- ID: 61, å·¥å–®: JAR001, ç”¢å“: 11U885R00300, ä¸è‰¯é¡å‹: çµ„è£ä¸è‰¯, æ•¸é‡: 50, é›¶ä»¶: Shaft  
- ID: 60, å·¥å–®: JAR001, ç”¢å“: 11U885R00300, ä¸è‰¯é¡å‹: æª¢å…·NG, æ•¸é‡: 13, é›¶ä»¶: Mount

### 3. æ ¹æœ¬åŸå› ç™¼ç¾
æª¢æŸ¥`get_defects()`å‡½æ•¸çš„SQLæŸ¥è©¢èªå¥ç™¼ç¾å•é¡Œï¼š

**åŸå§‹å•é¡Œä»£ç¢¼ï¼š**
```sql
SELECT id, work_order, product_name, defect_type, defect_level, quantity,
       package_number, description, responsible_dept, status, created_time, deadline,
       assigned_person, resolution, completion_time, logged_by,
       primary_dept, secondary_dept, primary_person, secondary_person, approval_status, approval_result,
       work_order_total_qty, supplier, component, third_dept, third_person, third_approval_status
FROM defects
```

**å•é¡Œåˆ†æï¼š**
- æŸ¥è©¢ä¸­åªæœ‰`component`æ¬„ä½ï¼Œç¼ºå°‘`defective_component`æ¬„ä½
- çµ±è¨ˆåˆ†æé é¢éœ€è¦è®€å–`defective_component`æ¬„ä½ï¼Œä½†è©²æ¬„ä½æ²’æœ‰è¢«æŸ¥è©¢å‡ºä¾†
- å°è‡´`analysis_data`ä¸­æ²’æœ‰`defective_component`è³‡æ–™

## âœ… ä¿®å¾©æ–¹æ¡ˆ

### ä¿®å¾©æ­¥é©Ÿ 1ï¼šæ›´æ–°SQLæŸ¥è©¢
åœ¨`get_defects()`å‡½æ•¸çš„SQLæŸ¥è©¢ä¸­æ–°å¢`defective_component`æ¬„ä½ï¼š

```sql
SELECT id, work_order, product_name, defect_type, defect_level, quantity,
       package_number, description, responsible_dept, status, created_time, deadline,
       assigned_person, resolution, completion_time, logged_by,
       primary_dept, secondary_dept, primary_person, secondary_person, approval_status, approval_result,
       work_order_total_qty, supplier, component, defective_component, third_dept, third_person, third_approval_status
FROM defects
```

### ä¿®å¾©æ­¥é©Ÿ 2ï¼šæ›´æ–°æ–‡å­—æ¬„ä½è™•ç†
åœ¨æ–‡å­—æ¬„ä½åˆ—è¡¨ä¸­æ–°å¢`defective_component`ï¼š

```python
text_columns = ['work_order', 'product_name', 'defect_type', 'defect_level', 'description', 
               'responsible_dept', 'status', 'assigned_person', 'resolution', 'logged_by',
               'primary_dept', 'secondary_dept', 'primary_person', 'secondary_person', 
               'approval_status', 'approval_result', 'supplier', 'component', 'defective_component', 'third_dept', 
               'third_person', 'third_approval_status']
```

## ğŸ§ª ä¿®å¾©é©—è­‰

### é©—è­‰çµæœ
åŸ·è¡Œä¿®å¾©å¾Œçš„æ¸¬è©¦ï¼š

```
ğŸ”§ æ¸¬è©¦é›¶ä»¶ä¸è‰¯çµ±è¨ˆåˆ†æä¿®å¾©
========================================
âœ… è®€å– 6 ç­†è¨˜éŒ„
âœ… defective_componentæ¬„ä½å­˜åœ¨
âœ… æ‰¾åˆ° 3 ç­†æœ‰é›¶ä»¶ä¸è‰¯è³‡æ–™çš„è¨˜éŒ„

é›¶ä»¶ä¸è‰¯è³‡æ–™ï¼š
   ID: 62, å·¥å–®: JAR001, ç”¢å“: 11U885R00300
   ä¸è‰¯é¡å‹: è¡¨é¢ç¼ºé™·, æ•¸é‡: 13, é›¶ä»¶: Mount

   ID: 61, å·¥å–®: JAR001, ç”¢å“: 11U885R00300
   ä¸è‰¯é¡å‹: çµ„è£ä¸è‰¯, æ•¸é‡: 50, é›¶ä»¶: Shaft

   ID: 60, å·¥å–®: JAR001, ç”¢å“: 11U885R00300
   ä¸è‰¯é¡å‹: æª¢å…·NG, æ•¸é‡: 13, é›¶ä»¶: Mount

ğŸ“Š æ¸¬è©¦çµ±è¨ˆåˆ†æåŠŸèƒ½...
âœ… é›¶ä»¶çµ±è¨ˆåˆ†ææˆåŠŸï¼Œå…± 2 ç¨®é›¶ä»¶
é›¶ä»¶ä¸è‰¯çµ±è¨ˆï¼š
   Shaft: 50 pcs (65.8%)
   Mount: 26 pcs (34.2%)

ç¸½é›¶ä»¶ä¸è‰¯æ•¸é‡: 76 pcs
âœ… é›¶ä»¶ä¸è‰¯çµ±è¨ˆåˆ†æåŠŸèƒ½ä¿®å¾©æˆåŠŸï¼
```

### åŠŸèƒ½é©—è­‰æ¸…å–®
- âœ… `get_defects()`å‡½æ•¸èƒ½æ­£ç¢ºè®€å–`defective_component`æ¬„ä½
- âœ… çµ±è¨ˆåˆ†æé é¢èƒ½æ­£ç¢ºç¯©é¸æœ‰é›¶ä»¶ä¸è‰¯è³‡æ–™çš„è¨˜éŒ„
- âœ… é›¶ä»¶çµ±è¨ˆåˆ†æåŠŸèƒ½æ­£å¸¸é‹ä½œ
- âœ… é›¶ä»¶ä½”æ¯”è¨ˆç®—æ­£ç¢º
- âœ… åœ–è¡¨å’Œçµ±è¨ˆè¡¨èƒ½æ­£å¸¸é¡¯ç¤º
- âœ… æ”¹å–„å»ºè­°åŠŸèƒ½æ­£å¸¸

## ğŸ“Š é æœŸæ•ˆæœ

ä¿®å¾©å¾Œï¼Œç”¨æˆ¶åœ¨çµ±è¨ˆåˆ†æé é¢çš„ã€ŒğŸ”§ é›¶ä»¶ä¸è‰¯åˆ†æã€å€æ®µå°‡èƒ½çœ‹åˆ°ï¼š

1. **ğŸ“Š é›¶ä»¶ä¸è‰¯çµ±è¨ˆåœ–è¡¨**
   - Shaft: 50 pcs (65.8%)
   - Mount: 26 pcs (34.2%)

2. **ğŸ” é›¶ä»¶ä¸è‰¯è©³ç´°åˆ†æè¡¨æ ¼**
   - é›¶ä»¶é¡å‹ã€ä¸è‰¯æ•¸é‡ã€ä½”æ¯”çµ±è¨ˆ
   - é›¶ä»¶ vs ä¸è‰¯é¡å‹äº¤å‰åˆ†æ

3. **ğŸ“ˆ é›¶ä»¶ä¸è‰¯è¶¨å‹¢åˆ†æ**
   - æ™‚é–“è¶¨å‹¢åœ–è¡¨

4. **ğŸ’¡ é›¶ä»¶ä¸è‰¯æ”¹å–„å»ºè­°**
   - ğŸš¨ Shaft ä½”é›¶ä»¶ä¸è‰¯çš„ 65.8%ï¼Œå»ºè­°å„ªå…ˆæ”¹å–„æ­¤é›¶ä»¶çš„å“è³ªæ§åˆ¶
   - âš™ï¸ Shaft ä¸è‰¯ç‡è¼ƒé«˜ï¼Œå»ºè­°æª¢æŸ¥è»¸é¡åŠ å·¥ç²¾åº¦å’Œææ–™å“è³ª

## ğŸ¯ ç¸½çµ

**å•é¡Œæ ¹å› ï¼š** `get_defects()`å‡½æ•¸çš„SQLæŸ¥è©¢ç¼ºå°‘`defective_component`æ¬„ä½

**ä¿®å¾©æ–¹æ¡ˆï¼š** åœ¨SQLæŸ¥è©¢ä¸­æ–°å¢`defective_component`æ¬„ä½ä¸¦æ›´æ–°æ–‡å­—æ¬„ä½è™•ç†åˆ—è¡¨

**ä¿®å¾©æ•ˆæœï¼š** é›¶ä»¶ä¸è‰¯çµ±è¨ˆåˆ†æåŠŸèƒ½å®Œå…¨æ¢å¾©æ­£å¸¸ï¼Œç”¨æˆ¶åœ¨è™•ç†è¿½è¹¤æ™‚é¸æ“‡çš„é›¶ä»¶ä¸è‰¯è³‡è¨Šèƒ½æ­£ç¢ºåœ¨çµ±è¨ˆåˆ†æä¸­é¡¯ç¤º

**æ¸¬è©¦ç‹€æ…‹ï¼š** âœ… å…¨éƒ¨åŠŸèƒ½æ¸¬è©¦é€šé

ç¾åœ¨ç”¨æˆ¶åœ¨è™•ç†è¿½è¹¤é é¢é¸æ“‡ä¸è‰¯é›¶ä»¶å¾Œï¼Œå¯ä»¥åœ¨çµ±è¨ˆåˆ†æé é¢çœ‹åˆ°å®Œæ•´çš„é›¶ä»¶ä¸è‰¯çµ±è¨ˆå½™æ•´ã€‚ 